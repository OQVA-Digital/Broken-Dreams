---

import Logo from "./vectors/logo-reduced.astro";

---

<header>
    <div class="base_width">
        <div class="logo_flex">
            <a href="/" class="logo">
                <Logo/>
            </a>

            <p>Broken<br>Dreams</p>
        </div>

        <nav>
            <div class="ctnr">
                <a href="/">Home</a>
                <a href="/dream-with-us">Dream with us</a>
                <a href="/taste-authenticity">Taste Authenticity</a>
                <a href="/contact/">Contact us</a>
            </div>
            
            <!-- <a href="/contact/" class="main cta"><span>Try freshOps</span></a> -->
        </nav>

        <button class="hambt" type="button" aria-label="Open navigation menu">
            <div class="ctnr">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </button>
    </div>
</header>

<style>
    header {
        background-color: rgb(32 29 32 / 50%);
        height: var(--header-height);
        display: flex;
        justify-content: center;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 2;
        backdrop-filter: blur(0.4rem);
        border-bottom: 0.1rem solid var(--c2-a);
        border-radius: 0 0 0.7rem 0.7rem;
    }

    .logo_flex {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 1.5rem;
        font-size: clamp(1.6rem,4.2vw,1.9rem);
        line-height: 1;
        font-weight: 700;
        color: var(--c2-b);
    }

    header .base_width {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 2.5vw;
    }

    header .logo {
        display: flex;
        align-items: center;
        justify-content: center;
        width: fit-content;
        height: 100%;
        width: clamp(1rem,15vmin,7rem);
    }

    nav {
        position: absolute;
        top: 100%;
        right: 0;
        left: 0;
        margin-inline: auto;
        width: var(--width-1);
        background-color: var(--c2-a);
        padding-block: 2rem;
        color: var(--light);
        font-size: clamp(1.5rem,4vw,1.7rem);
        border-radius: 0.4rem;
        font-weight: 300;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.2s ease,visibility 0.2s ease,transform 0.2s ease;
    }

    nav, nav > .ctnr {
        display: flex;
        flex-direction: column;
        gap: clamp(1rem, 4vw, 4rem);
    }

    nav.show {
        opacity: 1;
        visibility: visible;
        transform: translateY(10%);
    }

    nav a {
        padding: 1.1rem 3rem;
        margin-inline: 2rem;
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    nav a::after {
        content:'';
        position: absolute;
        bottom:0;
        width: 100%;
        height: 0.1rem;
        background-color: var(--light-a);
        left: 0;
        right: 0;
        transform: translateX(-102%);
        transition: transform 0s ease;
    }

    nav a:hover:after {
        transform: translateX(102%);
        transition: transform 0.3s ease;
    }

    header .main.cta {
        padding: 1rem 3rem;
        font-weight: 700;
        width: fit-content;
        margin-inline: 2rem;
        position: relative;
        background-color: var(--light);
        color: var(--c2);
        padding: clamp(0.7rem,3.5vw,1.4rem) clamp(1.6rem,14vw,5rem) clamp(0.7rem,3.5vw,1.4rem) clamp(1.6rem,8vw,3.3rem);
        font-size: inherit;
    }

    header .main.cta span {
        position: relative;
    }

    header .main.cta:hover:before {
        background-color: rgb(255 255 255 / 100%);
        transition: background-color 0s ease;
    }

    .hambt {
        width: var(--header-height);
        height:var(--header-height);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 3;
        margin-right: calc((var(--header-height) - clamp(2.5rem,9vw,4rem)) / -2);
    }

    .hambt > .ctnr {
        width: clamp(2.5rem,8vw,4rem);
        height: clamp(2rem,7vw,3.5rem);
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: stretch;
    }

    .hambt span {
        height: 10%;
        background-color: var(--light);
        border-radius: 0.2rem;
        transition: opacity 0.2s ease, transform 0.2s ease;
    }

    .hambt.close {
    }

    .hambt.close span:nth-child(1) {
        transform: translateY(430%) rotate(45deg);
    }

    .hambt.close span:nth-child(2) {
        transform: rotate(-45deg);
    }

    .hambt.close span:nth-child(3) {
        opacity: 0;
        transform: translateY(-220%);
    }

    @media screen and (min-width: 1150px) {
        .hambt {
            display: none;
        }

        nav {
            position: relative;
            opacity: 1;
            visibility: visible;
            top: unset;
            background-color: transparent;
            border-radius: unset;
            flex: 1;
            justify-content: space-between;
            align-items: center;
            padding-block: unset;
        }

        nav a {
            margin-inline: unset;
            padding-inline: 1.5rem;
            background-color: transparent;
        }

        nav, nav > .ctnr {
            flex-direction: row;
            justify-content: right;
        }
    }
</style>

<script>
    const menuBt = document.querySelector(".hambt");
    const nav = document.querySelector("header nav");
    const navBts = document.querySelectorAll("header nav a");

    let showingMenu = false;

    function toggleNav() {
        if (showingMenu == false) {
            nav.classList.add("show");
            menuBt.classList.add("close");

            showingMenu = true;
        } else {
            nav.classList.remove("show");
            menuBt.classList.remove("close");

            showingMenu = false;
        }
    }

    if(window.getComputedStyle(menuBt).display != "none") {
        menuBt.addEventListener("click", toggleNav);

        for (let i = 0; i < navBts.length; i++) {
            navBts[i].addEventListener("click", toggleNav);
        }

        window.addEventListener("scroll", function (e) {
            if (showingMenu == true) {
                toggleNav();
            }
        });
    }
</script>